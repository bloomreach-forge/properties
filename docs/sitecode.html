<!DOCTYPE html>
    <!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 5 Aug 2020 
 | Rendered using BloomReach Forge Maven Skin 3.1.1 based on Apache Maven Fluido Skin
-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                  <meta name="Date-Revision-yyyymmdd" content="20200805" />
              <meta http-equiv="Content-Language" content="en" />
      <title>Bloomreach Forge Properties Plugin &#x2013; Usage in an HST site</title>
  <link rel="stylesheet" href="./css/forge-maven-skin-syntaxhighlighter-3.1.1.min.css"/>
  <link rel="stylesheet" href="./css/forge-maven-skin-3.1.1.min.css"/>
  <link rel="stylesheet" href="./css/site.css" />
  <link rel="stylesheet" href="./css/print.css" media="print" />
  <link rel="icon" type="image/png" href="./images/skin/logo_64.png" sizes="64x64">

  
  <script type="text/javascript" src="./js/forge-maven-skin-syntaxhighlighter-3.1.1.min.js"></script>
  <script type="text/javascript" src="./js/forge-maven-skin-3.1.1.min.js"></script>

    </head>
<body class="topBarDisabled">
                        <a href="https://github.com/bloomreach-forge/properties">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
         src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
         alt="Fork me on GitHub">
  </a>
          <div class="container-fluid">
  <div id="banner">
    <div id="logo">
                        <a href="https://bloomreach-forge.github.io">
        <img src="./images/skin/logo.png" alt="BloomReach Forge Logo" />
      </a>
    </div>
    <div class="pull-left">              <div id="bannerLeft">    <h1>Bloomreach Forge Properties Plugin</h1>
    </div>
              </div>
    <div class="pull-right"></div>
    <div class="clear"><hr/></div>
  </div>

  <div id="breadcrumbs">
                            <div class="links">
      <a href="https://documentation.bloomreach.com">documentation.bloomreach.com</a>
      <a href="https://developers.bloomreach.com">developers.bloomreach.com</a>
    </div>
    <ul class="breadcrumb">
    
  <li id="publishDate">published: 5 Aug 2020  
  </li>
  
        
            </ul>
    <div class="clear"><hr/></div>
  </div>
<div class="row-fluid">
  <div id="leftColumn" class="span2">
    <div class="well sidebar-nav">
    
    <ul class="nav nav-list">
            <li class="nav-header">Home</li>
              <li>  <a href="index.html" title="Home">  <span class="none"></span>  Home</a>  </li>
        <li>  <a href="screenshots.html" title="Screenshots">  <span class="none"></span>  Screenshots</a>  </li>
        <li>  <a href="release-notes.html" title="Release Notes">  <span class="none"></span>  Release Notes</a>  </li>
                  <li class="nav-header">Usage</li>
              <li>  <a href="install.html" title="Installation">  <span class="none"></span>  Installation</a>  </li>
        <li class="active">  <a href="#"><span class="none"></span>HST Site code</a>
  </li>
                  <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                      <li>  <a href="project-info.html" title="Project Information">  <span class="icon-chevron-right"></span>  Project Information</a>  </li>
                            <li>  <a href="project-reports.html" title="Project Reports">  <span class="icon-chevron-right"></span>  Project Reports</a>  </li>
        </ul>
    
          <hr />
      <div id="poweredBy">
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
              <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">  <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />  </a>
          </div>
    </div>
  </div>
  <div id="bodyColumn"  class="span10" >
    
  
    <div class="section">
<h2><a name="Usage_in_an_HST_site"></a>Usage in an HST site</h2>
      
<p>
        There is a <tt>&lt;properties:property/&gt;</tt> tag available for usage in a frontend.
        You also can access properties bean in HST components through the Properties Manager (or directly by path)
        to prepare a map of name/value pairs for the JSP.
      </p>
      
<div class="section">
<h3><a name="Use_the_.3Cproperties:property.2F.3E_tag_in_JSP"></a>Use the &lt;properties:property/&gt; tag in JSP</h3>
        
<p>
          The JSP tag is easy to use for your site's labels and will suffice if the properties documents and the
          property names do not change in a standing environment. If that is the case, you may want to parameterize the
          attribute values. This is a standard usage of the JSP tag:
        </p>
        
<div class="source"><pre>
  &lt;%@ taglib prefix='properties'
      uri=&quot;http://www.onehippo.org/properties/jsp/tags&quot;%&gt;

  &lt;properties:property var=&quot;myVariable&quot;
                       name=&quot;myPropertyName&quot;
                       documentPath=&quot;myPropertiesDocumentPath&quot;/&gt;
  &lt;div&gt;${myVariable}&lt;/div&gt;</pre></div>
        
<table class="table table-striped" border="1" cellpadding="0" cellspacing="5">
          
<tr class="a">
            
<th colspan="2"><b>Attributes of &lt;properties:property/&gt;</b></th>
          </tr>
          
<tr class="b">
            
<td><b>var</b></td>
            
<td>Optional variable name by which to store the property value as request attribute.</td>
          </tr>
          
<tr class="a">
            
<td><b>name</b></td>
            
<td>Mandatory name of the name/value pair that is the property.</td>
          </tr>
          
<tr class="b">
            
<td><b>documentPath</b></td>
            
<td>Optional path to the properties document to get the property from, relative to the default document location
              as configured in the Properties Manager. If absent, the default document name from the Properties Manager is taken.</td>
          </tr>
          
<tr class="a">
            
<td><b>language</b></td>
            
<td>Optional two letter language code to be used to retrieve a translated variant of the properties
              document. If language is not given then request's locale is used.</td>
          </tr>
          
<tr class="b">
            
<td><b>managerPostFix</b></td>
            
<td>Optional postfix that is added to 'org.onehippo.forge.properties.api.PropertiesManager.'
              to retrieve the Properties Manager by id. Defaults to 'labels'.</td>
          </tr>
        </table>
      </div>
      
<div class="section">
<h3><a name="Parameterized_properties_with_nested_.3Cproperties:param.2F.3E_tags"></a>Parameterized properties with nested &lt;properties:param/&gt; tags</h3>
        
<p>
          Formatting a property value with parameters is supported by the &lt;properties:param/&gt; tag which is nested
          in &lt;properties:property/&gt;. All the possibilities of the class java.text.MessageFormat can be used.
          These are two examples:
        </p>
        
<div class="source"><pre>
  &lt;properties:property name=&quot;date.short&quot; documentPath=&quot;example&quot; &gt;
      &lt;properties:param value=&quot;&lt;%= new java.util.Date() %&gt;&quot;/&gt;
  &lt;properties:property&gt;
          </pre></div>
        
<p>
          In property file named 'example' for key date.short the value is &quot;Today's date is {0,date,short}&quot;.
          Above code will result in &quot;Today's date is 21/09/12&quot;.
        </p>
        
<div class="source"><pre>
  &lt;properties:property name=&quot;test.string&quot; documentPath=&quot;example&quot; &gt;
      &lt;properties:param name=&quot;Tom&quot;/&gt;
      &lt;properties:param value=&quot;Mac&quot;/&gt;
  &lt;/properties:property&gt;
          </pre></div>
        
<p>In property file named 'example' for key test.string value is &quot;{0} and {1} are good friends&quot;.
          Above code will result in &quot;Tom and Mac are good friends&quot;.
\       </p>
        
<table class="table table-striped" border="1" cellpadding="0" cellspacing="5">
          
<tr class="a">
            
<th colspan="2"><b>Attribute of &lt;properties:property/&gt;</b></th>
          </tr>
          
<tr class="b">
            
<td><b>value</b></td>
            
<td>Required value of the parameter of type Object.</td>
          </tr>
         </table>
      </div>
      
<div class="section">
<h3><a name="Use_the_PropertiesManager_in_a_HST_component"></a>Use the PropertiesManager in a HST component</h3>
        
<p>
          This is an example of how properties documents are read using the manager.
          The manager will look for properties with configured name or the default name from
          the configure default location, relative to the given site content base bean.
        </p>
        <i>For use with 7.8</i>
        
<div class="source"><pre>
   // get the manager and base bean
  ComponentManager componentManager = (ComponentManager) this.getDefaultClientComponentManager();
  PropertiesManager propertiesManager = componentManager.getComponent(PropertiesManager.class.getName());
  HippoBean baseBean = this.getSiteContentBaseBean(request);
  ...</pre></div>
        <i>For use with 7.9</i>
        
<div class="source"><pre>
  // get the manager and base bean
  PropertiesManager propertiesManager = HstServices.getComponentManager().getComponent(PropertiesManager.class.getName());
  HippoBean baseBean = this.getSiteContentBaseBean(request);
  ...</pre></div>
        
<div class="source"><pre>...
  // Example A: retrieve one document bean by the configured default name
  PropertiesBean defaultPropertiesBean = this.propertiesManager.getPropertiesBean(baseBean);
  Map&lt;String, String&gt; defaultLabels = PropertiesUtil.toMap(propertiesBean);
  request.setAttribute(&quot;labels&quot;, defaultLabels);

  // Example B: retrieve one document bean by path parameter
  String labelsPath = this.getParameter(&quot;labelsPath&quot;, request);
  PropertiesBean propertiesBean = this.propertiesManager.getPropertiesBean(labelsPath, baseBean);
  Map&lt;String, String&gt; labels = PropertiesUtil.toMap(propertiesBean);
  request.setAttribute(&quot;labels&quot;, labels);

  // Example C: retrieve multiple document beans by hardcoded paths
  List&lt;String&gt; labelsPaths = Arrays.asList(&quot;common&quot;, &quot;specific&quot;);
  List&lt;PropertiesBean&gt; propertiesBeans = this.propertiesManager.getPropertiesBeans(labelsPaths, baseBean);
  Map&lt;String, String&gt; allLabels = PropertiesUtil.toMap(propertiesBeans);
  request.setAttribute(&quot;labels&quot;, allLabels);</pre></div>
      </div>
      
<div class="section">
<h3><a name="Retrieval_of_properties_beans_in_a_HST_component_directly_by_path"></a>Retrieval of properties beans in a HST component directly by path</h3>
        
<p>
          This is an example of how a properties bean containing labels is read
          from a configured path relative to site base bean. This is typically
          something that you can do in your project's base component.
        </p>
        
<div class="source"><pre>
  String labelsPath = this.getParameter(&quot;labelsPath&quot;, request);
  Properties labels = (Properties) this.getSiteContentBaseBean(request).getBean(labelsPath);
  request.setAttribute(&quot;labels&quot;, new PropertiesMap(new PropertiesBean(labels));</pre></div>
      </div>
      
<div class="section">
<h3><a name="Reading_property_maps_in_JSP_files"></a>Reading property maps in JSP files</h3>
        
<p>
          Because the PropertiesMap set at the request is a Map, it can be read using expression
          language. This is an example of reading labels:
        </p>
        
<div class="source"><pre>
  &lt;div id=&quot;header&quot;&gt;
      &lt;span&gt;${labels['header.title']}&lt;/span&gt;
      &lt;span&gt;${labels['header.subtitle']}&lt;/span&gt;
  &lt;/div&gt;</pre></div>
      </div>
    </div>
  

    </div>
    </div>
    </div>
    <hr/>
    <footer>
    <div class="container-fluid">
      <div class="row-fluid">
          <p class="copyright">Copyright &copy;      2009&#x2013;2020
                    <a href="https://www.bloomreach.com">BloomReach Inc.</a>.
              
</p>
    </div>
            </div>
  </footer>
    </body>
</html>

